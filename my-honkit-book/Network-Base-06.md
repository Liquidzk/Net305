# Network-Base-06 å®žè·µï¼šSocket


![](https://p.sda1.dev/22/3e67a9bb8199c4f48c0eae3162b2313a/Net305.png)



> `éš¾åº¦`ï¼šä¸€èˆ¬/å›°éš¾
>
> è¿™æ˜¯ä¸€é“å¤šæ¢¯åº¦éš¾åº¦çš„é¢˜ç›®ï¼Œå°†ç”±ç®€åˆ°éš¾çš„æ¶‰åŠåˆ° socket ç›¸å…³çš„çŸ¥è¯†ã€‚å³ä½¿ä½ æ²¡å®Œæˆæ‰€æœ‰ä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥æäº¤ã€‚
>
> æ³¨æ„ï¼Œä½œä¸ºAdvancedå®ˆé—¨å‘˜ï¼Œä»Žæœ¬é¢˜å¼€å§‹å¼•å¯¼ä¼šé€æ¸å‡å°‘ï¼Œç•™ç»™å¤§å®¶å®žè·µå‘æŒ¥çš„ç©ºé—´è¾ƒå¤§ã€‚

å¥½äº†æˆ‘ä»¬ç»ˆäºŽèµ°å®Œäº†å¼•å¯¼å¤§å®¶çœ‹ä¹¦çš„æ‰€æœ‰å†…å®¹ï¼ŒæŽ¥ä¸‹æ¥ä¼šç¨å¾®ä¸Šä¸€ç‚¹å¼ºåº¦ã€‚

ðŸ™Œ æœ¬é¢˜å»ºè®®åœ¨ Linux çŽ¯å¢ƒä¸‹å®Œæˆï¼Œå¹¶ä¸”å®Œæˆå‰å»ºè®®äº†è§£ä¸€å®šçš„ Linux å¸¸è¯†

## é¢˜ç›®æè¿°
### information
> è¿™é‡Œåªæ˜¯ç®€å•ä»‹ç»äº†ä¸€ä¸‹æœ¬é¢˜ä¸­æ¶‰åŠåˆ°çš„æ¦‚å¿µï¼Œå…·ä½“çš„å†…å®¹å¸Œæœ›ä½ èƒ½è‡ªå·±åŽ»æŸ¥è¯¢å…·ä½“èµ„æ–™æ·±å…¥äº†è§£ã€‚
>

é¦–å…ˆæˆ‘ä»¬å†æ¬¡ç®€å•äº†è§£ä¸€ä¸‹ socketï¼Œå®ƒæ˜¯è®¡ç®—æœºä¹‹é—´è¿›è¡Œé€šä¿¡çš„ä¸€ç§çº¦å®šæˆ–ä¸€ç§æ–¹å¼ã€‚é€šè¿‡ socketï¼Œè®¡ç®—æœºå¯ä»¥æŽ¥æ”¶å…¶ä»–è®¡ç®—æœºçš„æ•°æ®ï¼Œä¹Ÿå¯ä»¥å‘å…¶ä»–è®¡ç®—æœºå‘é€æ•°æ®ã€‚åœ¨ C è¯­è¨€åšé¢˜é¡»çŸ¥é‡Œé¢æˆ‘ä»¬æåˆ°è¿‡äº† Unix æ˜¯ç”¨ C è¯­è¨€å®žçŽ°çš„ï¼Œè€Œ Unix/Linux çš„å“²å­¦å°±æ˜¯â€œä¸€åˆ‡éƒ½æ˜¯æ–‡ä»¶â€ï¼Œéƒ½å¯ä»¥ä½¿ç”¨ open|write|read|close çš„æ“ä½œï¼Œè€Œsocket ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠ socket ç†è§£ä¸ºä¸€ç§ç‰¹æ®Šçš„æ–‡ä»¶ã€‚



åœ¨ä½ æäº¤çš„æ—¶å€™ï¼Œå›žç­”ä¸­åº”è¯¥åŒ…å«ä»¥ä¸‹å†…å®¹

+ è§„èŒƒçš„ä»£ç 
+ ç¨‹åºç¼–è¯‘ã€è¿è¡Œæˆªå›¾
+ ä½ å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ¡ˆ
+ ä½ å¯¹æœ¬é¢˜çš„æƒ³æ³•

### Part 1. Cross the Net
ç”¨ TCP åè®®å†™ä¸€å¯¹ç¨‹åºï¼ˆå»ºè®®Cï¼‰ï¼Œç”¨åœ¨åŒä¸€å±€åŸŸç½‘è¿è¡ŒåŽï¼Œä¸¤ä¸ªç¨‹åºå¯ä»¥å½¼æ­¤è½®æµäº’å‘æ¶ˆæ¯

#### tasks:
+ å¦‚æžœè¿™ä¸¤ä¸ªç¨‹åºä¸åœ¨åŒä¸€å±€åŸŸç½‘é‡Œé¢ï¼Œè®©è¿™å¯¹ç¨‹åºè¿˜èƒ½æ­£å¸¸è¿è¡Œå—ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿè°ˆè°ˆä½ çš„ç†è§£
+ æäº¤è¿è¡Œç¨‹åºçš„æˆªå›¾å’Œæºä»£ç 
+ ä½ çš„ç¨‹åºæ˜¯å¦æ˜¯"å›žåˆåˆ¶å¯¹è¯"ï¼Œå³ A ç»™ B å‘é€å®Œæ¶ˆæ¯åŽå¿…é¡»ç­‰å¾… B å›žå¤åŽæ‰èƒ½å‘é€ä¸‹ä¸€æ¡æ¶ˆæ¯ï¼Ÿå¦‚æžœæ˜¯ï¼Œå°è¯•å®Œå–„ä½ çš„ç¨‹åºï¼Œä½¿ä¹‹å…·æœ‰ç±»ä¼¼ QQ\å¾®ä¿¡ é‚£ç§å³æ—¶é€šä¿¡çš„åŠŸèƒ½ï¼ˆè¿™ç®—ä¸€ä¸ª challenge ä»»åŠ¡ï¼Œä½ å¹¶ä¸ä¸€å®šè¦å®Œæˆè¿™ä¸ªä»»åŠ¡ï¼‰ã€‚

### Part 2. Remote Argument
ç”¨ UDP åè®®å†™ä¸€å¯¹ç¨‹åºï¼ˆå»ºè®®Cï¼‰ï¼Œåœ¨åŒä¸€å±€åŸŸç½‘è¿è¡ŒåŽï¼ŒA ç¨‹åºä¸­éœ€è¦è®¡ç®—å¹¶æ‰“å°ä¸€ä¸ªåœ†çš„é¢ç§¯ï¼Œä½†æ˜¯è¾“å…¥çš„å‚æ•°ï¼ˆåŠå¾„ï¼‰åœ¨å¦ä¸€å°ä¸»æœºè¿è¡Œçš„ B ç¨‹åºä¸­è¾“å…¥ã€‚

+ è¯•ç€æ‹¿ä¸Šä¸€é¢˜æ”¹ä¸€æ”¹ï¼Ÿ

#### tasks:
+ æäº¤è¿è¡Œç¨‹åºçš„æˆªå›¾å’Œæºä»£ç 
+ å¦‚æžœä½ è§‰å¾—è®¡ç®—åœ†çš„é¢ç§¯å¤ªç®€å•äº†ï¼Œå¯ä»¥è‡ªè¡Œå‘æŒ¥æ•´ç‚¹æ´»ï¼ˆä½† wp ä¸­éœ€è¦å†™æ¸…æ¥šï¼Œæ¸…æ¥šåˆ°è®©ä¸€ä¸ªèŒæ–°èƒ½çœ‹æ‡‚ï¼‰
+ åœ¨ wp ä¸­è°ˆè°ˆè‡ªå·±å¯¹ TCP/UDP çš„ç†è§£ï¼Œè¯•ç€è¯´ä¸€è¯´å®ƒä»¬å„è‡ªæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ã€‚

> animi waifu about TCP/UDP
>

![](https://i.loli.net/2021/07/27/HgAGck9tudvTySK.jpg)

### Part 3. Tiny Web ï¼ˆé€‰åšï¼‰
åœ¨å‰ä¸¤ä¸ªé¢˜ç›®ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯å†™å¥½ç¨‹åºç„¶åŽç”¨æˆ·é…å¥—ä½¿ç”¨ï¼Œè¿™æ˜¯ä¸€ç§ C/S æž¶æž„ï¼Œä½†æ˜¯æˆ‘ä»¬å¹³æ—¶ç½‘ä¸Šå†²æµªðŸ„â€â™‚ï¸ðŸ„â€â™€ï¸çš„æ—¶å€™åªéœ€è¦æµè§ˆå™¨å°±å¯ä»¥åº·å„ç§å¥½åº·çš„ç½‘ç«™äº†ï¼Œè¿™å°±æ˜¯ä¸€ç§ B/S æž¶æž„ã€‚

#### task
çŽ°åœ¨ï¼Œä½ éœ€è¦å†™ä¸€ä¸ªç®€å•çš„ web æœåŠ¡å™¨ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸º Tiny web å¥½äº†)ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ä½ æˆåŠŸå®žçŽ°äº†ä¹‹åŽï¼Œåœ¨è°·æ­Œ |ç«ç‹ | edge | IE æµè§ˆå™¨ä¸­è¾“å…¥ï¼š192.168.xxx.xxx:xxxxxï¼ˆä¹Ÿå°±æ˜¯ä½  socket çš„åœ°å€å’Œç«¯å£ï¼‰ çš„æ—¶å€™ï¼Œä¼šå‡ºçŽ°ä¸€ä¸ªä½ é¢„è®¾çš„å†…å®¹ã€‚ç›®å‰ï¼Œä½ åªéœ€è¦å®žçŽ°è¿™ä¸ªåŠŸèƒ½ï¼Œä¸ç”¨è€ƒè™‘å…¶ä»–ç¾Žè§‚ã€æ€§èƒ½ç­‰ç§ç§é—®é¢˜ã€‚

#### challenge 
1. ä¿®æ”¹çŽ°æœ‰çš„ä»£ç ï¼Œå½“æµè§ˆå™¨è®¿é—® xxx.xxx.xxx.xxx:xxxxx/pic çš„æ—¶å€™ï¼Œå¯ä»¥åº·åˆ°ä¸€å¼ å›¾å›¾ï¼ï¼ˆæ”¾ä¸€å¼ ä½ å–œæ¬¢çš„å›¾å°±è¡Œï¼‰
2. ä½¿ç”¨ fork è®©ä½ çš„æœåŠ¡å™¨å˜æˆå¤šè¿›ç¨‹æœåŠ¡å™¨ æˆ–è€…ä½¿ç”¨ pthread è®©ä½ çš„æœåŠ¡å™¨å˜æˆå¤šçº¿ç¨‹æœåŠ¡å™¨ï¼Œä½ å¯ä»¥åªé€‰æ‹©ä¸€ä¸ªæ–¹æ¡ˆå®Œæˆã€‚
3. ç›®å‰è¿™ä¸ªæœåŠ¡å™¨åªèƒ½æ”¾å‡ºä¸€äº›æœ‰é™çš„å†…å®¹ï¼Œè€Œäº’è”ç½‘åº”å½“æ˜¯æ‰€æœ‰äººéƒ½èƒ½å‚ä¸Žè¿›æ¥çš„åª’ä»‹ï¼å®žçŽ°ä¸€ä¸ªç±»ä¼¼ç½‘ç›˜çš„ç®€æ˜“æœåŠ¡å™¨ï¼Œæœ‰è¿™æ ·çš„åŠŸèƒ½ï¼šç”¨æˆ·å¯ä»¥ä¸Šä¼ æ–‡ä»¶ï¼ŒåŒæ—¶é€šè¿‡è®¿é—® xxx.xxx/filename ä¸‹è½½å¯¹åº”çš„æ–‡ä»¶
4. è‡ªç”±å‘æŒ¥ä½ çš„æ‰€å­¦ï¼Œä»Žæ€§èƒ½ã€å®‰å…¨ç­‰æ–¹é¢åŠ å…¥ä½ çš„å·§æ€ï¼Œå¹¶ä¸”åœ¨æäº¤çš„å›žç­”ä¸­ä»‹ç»ä½ çš„æƒ³æ³•

#### tips:
+ å›žé¡¾ä¸€ä¸‹ http åè®®ï¼Œå¼„æ‡‚ä¸€äº›åŸºæœ¬çš„æ¦‚å¿µï¼Œæ¯”å¦‚è¯´è¯·æ±‚ã€å“åº”ã€headersã€bodyã€‚
+ è¿™ä¸ªæƒ…å¢ƒä¸‹ï¼Œsocket åº”è¯¥é€‰æ‹© TCP è¿˜æ˜¯ UDP å‘¢ï¼Ÿ
+ åœ¨å®žçŽ° B/S ä¸­çš„ S çš„æ—¶å€™ï¼Œæˆ‘ä»¬åº”è¯¥æ€Žä¹ˆç”¨ C è¯­è¨€å¤„ç†è¯·æ±‚ï¼Œåˆåº”è¯¥æ€Žæ ·ç”Ÿæˆå“åº”å‘¢ï¼Ÿ
+ æœ€åŽï¼Œå–„ç”¨æœç´¢å¼•æ“Ž

### æäº¤æ–¹å¼

å°†é¢˜ç›®ä¸­è¦æ±‚çš„æäº¤çš„æ€»ç»“å†…å®¹åˆ©ç”¨ Markdown æ ¼å¼è¿›è¡Œç¼–è¾‘ï¼Œå¹¶å­˜ä¸º PDF æ–‡ä»¶ã€‚å°†å…¶ä¸Žä½ çš„æºä»£ç ä¸€èµ·æäº¤è‡³é‚®ç®±ï¼šliquidzk@outlook.com

æ–‡ä»¶åè¦æ±‚ï¼šå§“å-å­¦å·-Base06.pdf ï¼Œæœ‰ä»£ç çš„è¯ä¸€èµ·æ‰“åŒ…ä¸ºï¼šå§“å-å­¦å·-Base06.zip 


# å‡ºé¢˜è€…è”ç³»â½…å¼
> <font style="background-color:#FFFFFF;">QQï¼š492928615</font>
>
> é‚®ç®±ï¼šliquidzk@outlook.com
>

---



