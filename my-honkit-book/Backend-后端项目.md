# 后端项目
![](https://p.sda1.dev/22/3e67a9bb8199c4f48c0eae3162b2313a/Net305.png)

> `难度系数`：一般
>
> 从零到一，自己实现一个后端小项目吧~

![](https://golang.google.cn/images/go_mercadolibre_case_study_logo.png)

tk_sky 从来不是一个因循守旧的人。他发现招新题提交系统居然还要依赖电子邮箱，这种落后时代的东西是必然要被淘汰的。因此他立下大志，要使用他刚学会的 go 语言帮 net305 写一个自己的招新题提交系统。

然而他每天白天在公司上班，晚上9:30下班回去还要写6000字的毕设中期报告，只好拜托你帮工作室现场糊一个高端大气上档次的交题系统了。

## Task 1. ~~冒泡~~冒烟测试

众所周知，规范的系统在合并代码提交部署之前，都必须先经过一定的自动化测试，避免开发人员把线上服务搞坏。冒烟测试就是最简单的一种。

请你学习 golang 的 net/http 库相关使用方法，了解 http 相关协议的基本概念，实现一个 /api/smoke 接口，监听本机的 8080 端口，使得自己可以使用浏览器访问 127.0.0.1:8080/api/smoke 收到返回为 `hello net305!`的美好问候，表明交题系统已经启动了。

除此之外，tk_sky 还有个额外要求，希望也能看到当前的服务器时间，确保服务器的时区没有问题。请你构建一个结构体，自定义字段名使其包含上面的问候语和当前时间，将其序列化为 `json` 字符串，返回给浏览器。

### 完成要求

- 实现要求的程序，在题解中附上代码和编译、运行效果截图
- 附上你的解决思路、遇到的问题等

### Tip

- http 协议基础知识
- golang net/http 包
- json 序列化协议



## Task 2. CRUD

众所周知，任何后端服务都是一种 CRUD（增删改查）。net305 新交题系统的用户管理当然也是如此。

不过，http 协议的定义只规定了基本的请求类型和相关参数，但涉及到对具体资源的操作时，我们要怎样确定一种规范的表达方法，代表对具体资源的操作呢？

请你学习 Restful API 相关概念和知识，设计符合 Restful API 规范的接口，为招新题交题系统提供用户的增、删、改、查功能。这里暂时先将用户数据（自行定义，包含姓名、性别、年级、学院、密码等基本的属性）维护在内存中（全局变量 or whatever）。

tk_sky 看你用 http 库用的辛苦，推荐你用他刚学会的高端大气上档次的 Gin 框架来完成上面的任务，这也是 go 语言中最广泛使用的 web 框架，同时相较于 spring 这种超级大框架更加灵活专注，有助于你实现高端大气上档次的工作室交题系统。

设计与实现结束之后，作为优秀的后端程序员，你应该再学习使用 postman/apifox 等工具，对自己写的接口完成增删改查四种功能的用例测试。在题解上附上你的测试用例和测试结果。

### 完成要求

- 实现要求的程序，在题解中附上代码和编译、运行效果截图
- 附上你的解决思路、遇到的问题等

### Tip

- Gin 框架
- Restful API 规范
- 后端接口测试方法



## Task 3. 持久化

tk_sky 收到你发的交题系统后兴致勃勃地输入了大量的用户数据，准备大干一场。直到屏幕突然黑了，他才想起来清水河还有断电时间。等他重新打开你的程序，发现用户数据都不见了，导致他非常玉玉。

请你学习关系型数据库相关知识，学习使用 mysql/postgresql，自行设计表结构，把之前存储到内存的信息改为存储到数据库中吧。

虽然 tk_sky 很玉玉，但他还是好心地提醒你可以试试他刚学会的 gorm 框架，使用 ORM 思想的力量来大大简化对数据库的使用门槛吧。

实现完成之后，请用控制台登录你的关系型数据库，学习并使用 SQL 语句来完成查询数据库中储存的用户数据，验证你的接口实现是否正确。

### 完成要求

- 实现要求的程序，在题解中附上代码和编译、运行效果截图
- 说明你创建数据表的方法，以及如何设计表结构的
- 附上你的解决思路、遇到的问题等

### Tip

- Gorm 框架
- 关系型数据库
- SQL 语言



## Task 4. 交题

正如文化工作者一定要有文化，交题系统一定要能交题。

最后，就请你**使用 net/http 库**实现交题功能，允许用户通过 Post 请求上传本地题解文件到服务器。当然，这个功能隐含了许多需要实现的点：

- 实现一个命令行客户端，毕竟用户不可能手打 http 请求来用你的系统
- 实现服务端接收用户发送的文件数据，并保存在本地
- 用户可能恶意发送一个巨大无比的文件，要能够控制接收大小
- 用户的校园网可能欠费，需要支持一定程度的断点续传和超时控制
- 并发上传，尽可能加快整体上传过程
- 其他你能想到的优化内容

实现后，使用上一题学会的 docker 构建服务端镜像，部署到你的 linux 服务器/虚拟机上，并在你的本机上使用自己编写的客户端来上传一个文件。

### 完成要求

- 实现要求的程序，在题解中附上代码和编译、运行效果截图
- 附上你的解决思路、遇到的问题等

### Tip

- 开放题，除上述要求的功能之外，欢迎自主学习并实现更多的优化功能



## 拓展任务

学有余力，更多了解下后端的相关内容吧：

- 除了关系型数据库，还有哪些类型的数据库？分别适合什么场景？
- http 依赖的底层网络协议是什么？它的基本原理是什么？
- 了解一下微服务，体会现代后端开发的发展方向。将上面实现的代码分成两个微服务，分别负责用户管理和题解上传，同时能够使题解上传微服务用到用户微服务中的信息来验证用户身份。
- 了解 rpc 的基本概念，尝试使用 grpc 来替代上面两个微服务之间使用的 http 请求。
- 学习使用 websocket，来重新编写上述的交题文件上传功能。



---

### 本题题解要求

- 认真完成每个问题下的回答要求，记录你的做题过程，遇到的问题和解决方法等，配以必要的截图和说明；
- 用自己的理解回答问题，可以不完全理解知识点，但一定不要照抄网上资料，不得抄袭代码。

### 需要掌握的知识点

- 后端开发基础知识

### Tip

- 善用搜索引擎

### 本题提交方式

>  收件邮箱：linhanyuan_km@163.com
>
>  主题格式： 学号-姓名-考核-后端-05
>
>  主题示例：2024090922222-张三-考核-后端-05

### 出题者联系方式

> tk_sky
>
> QQ：2071594767
>
> 邮箱：linhanyuan_km@163.com

